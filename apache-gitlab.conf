<VirtualHost *:80>
    ServerName your-domain.com
    Redirect permanent / https://your-domain.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName your-domain.com

    SSLEngine on
    
    # Option 1: Let's Encrypt certificates (uncomment these lines)
    # SSLCertificateFile /etc/letsencrypt/live/your-domain.com/fullchain.pem
    # SSLCertificateKeyFile /etc/letsencrypt/live/your-domain.com/privkey.pem
    
    # Option 2: Custom certificates (uncomment and adapt these lines)
    # SSLCertificateFile /path/to/your/certificate.crt
    # SSLCertificateKeyFile /path/to/your/private.key
    # SSLCertificateChainFile /path/to/your/chain.crt

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:1584/
    ProxyPassReverse / http://127.0.0.1:1584/
    
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-For %h
</VirtualHost>